CREATE DATABASE MMORPG_Account; #创建数据库

USE MMORPG_Account; #使用数据库

#创建账户表
CREATE TABLE Account (
	Id INT PRIMARY KEY AUTO_INCREMENT,
	Username VARCHAR(50), #用户名
	Pwd VARCHAR(50), #密码
	YuanBao INT NOT NULL, #元宝
	LastServerId INT, #上次登陆的区号
	LastServerName VARCHAR(50), #上次登陆的区服
	CreateTime DATETIME, #创建时间
	UpdateTime DATETIME #更新时间
);

#插入账户表
INSERT INTO Account
(Username, Pwd, YuanBao, CreateTime)
VALUES
('test', 123, 10, Now());

#创建存储过程Account_Get
DELIMITER $$ #暂时将结束符分号;改为$$，以便存储过程中的;不会被认为是结束符
CREATE PROCEDURE Account_Get (IN id INT)
BEGIN
	SELECT * FROM Account WHERE Id = id;
END$$
DELIMITER ; #恢复结束符为分号;

SHOW PROCEDURES STATUS; #查看所有存储过程
SHOW CREATE PROCEDURE PROC_NAME; #查看存储过程代码

#注册存储过程
DELIMITER $$
CREATE PROCEDURE Account_Register(IN username VARCHAR(50), IN pwd VARCHAR(50))
BEGIN
	INSERT INTO Account
		(Username, Pwd, YuanBao, LastServerId, LastServerName)
	VALUES
		(username, pwd, 0, 0, '');

	SELECT @@IDENTITY; #查询插入的记录的自增列的值
END$$
DELIMITER ;

CALL PROC_NAME(); #调用存储过程